<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> | Xin Xie&#39;s Personal Website</title>
    <link rel="stylesheet" href="/xxsite/css/style.css" />
    <link rel="stylesheet" href="/xxsite/css/fonts.css" />
    


    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        displayMath: [['$$','$$'], ['\\[','\\]']],
        processEscapes: true
      },
      TeX: {
        Macros: {
          diff: "{\\mathrm{d}}",
          Diff: "{\\mathrm{D}}",
          ln: "\\mathrm{ln}",
          cp: "c_{\\mathrm{p}}",
          cv: "c_{\\mathrm{v}}",
          pt: "\\partial",
          deg: "^{\\circ}",
          degc: "^{\\circ}\\mathrm{C}",
          var: "\\mathrm{Var}",
          cov: "\\mathrm{Cov}"
        },
        extensions: ["cancel.js"]
      },
      CommonHTML: {
      },
      SVG: {
        font: "STIX-Web",
        minScaleAdjust: 80,
      }
    });
    </script>





  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a class="menulink" href="/xxsite/">Home</a></li>
      
      <li><a class="menulink" href="/xxsite/cv/">CV</a></li>
      
      <li><a class="menulink" href="/xxsite/datasci/">Data Science</a></li>
      
      <li><a class="menulink" href="/xxsite/misc/">Misc</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title"></span></h1>


</div>

<main>
<h2 id="mortgage-formula-derivation">Mortgage Formula Derivation</h2>
<h3 id="geometry-series">Geometry Series</h3>
<p>$$ S_n = 1 + a + a^2 + \cdots + a^{n-1} + a^n$$</p>
<p>$$ S_n a = a + a^2 + a^3 + \cdots + a^n+ a^{n+1} $$</p>
<p>$$ S_n (a-1) = a^{n+1}-1 $$</p>
<p>$$ S_n = \frac{1-a^{n+1}}{(1-a)} $$</p>
<h3 id="derivation">Derivation</h3>
<p>$n$ number of months
$m$ monthly payment
$a$ annualized interest rate
$r=a/12$ monthly interest rate (anuualized interest rate divided by 12 months)
$p$ principal</p>
<p><strong>First Month $n=1$</strong></p>
<p>starting debt = principal $p$</p>
<p>current interest = starting debt * monthly interest rate $$pr$$
actual principal payment = ( monthly payment - current interest ) $$ m-pr $$
debt left = ( starting debt - actual principal payment ) $$ p-(m-pr)=(1+r)p-m $$</p>
<p><strong>Second Month $n=2$</strong></p>
<p>starting debt = last debt $(1+r)p-m$</p>
<p>current interest = starting debt * monthly interest rate $$ ( (1+r)p-m ) r= (1+r)rp-mr $$
actual principal payment = ( monthly payment - current interest ) $$ m-[(1+r)rp-mr] $$
debt left = ( starting debt - actual principal payment )
$$
\begin{aligned}
&amp; (1+r)p-m-[m-((1+r)rp-mr)]\<br>
= &amp; (1+r)p-2m+((1+r)rp-mr)\<br>
= &amp; (1+r)p+(1+r)rp-2m-mr\<br>
= &amp; (r+1)^2p-(1+r)m-m
\end{aligned}
$$</p>
<p><strong>Third Month $n=3$</strong></p>
<p>starting debt = last debt $(r+1)^2p-(1+r)m-m$</p>
<p>current interest = starting debt * monthly interest rate
$$
\begin{aligned}
&amp; [ (r+1)^2p-(1+r)m-m ] r\<br>
= &amp; r(r+1)^2p-(1+r)rm-rm
\end{aligned}
$$
actual principal payment = ( monthly payment - current interest ) $$ m-[r(r+1)^2p-(1+r)rm-rm] $$
debt left = ( starting debt - actual principal payment )
$$
\begin{aligned}
&amp; (r+1)^2p-(1+r)m-rm - \left[ m-[r(r+1)^2p-(1+r)rm-rm] \right]\<br>
= &amp; (r+1)^3p -(1+r)^2m -(1+r)m - m
\end{aligned}
$$</p>
<p>Now the formula for debt left at the $n$th term seems to be
$$(r+1)^np -m[ (1+r)^{n-1}+\cdots+(1+r)^2 +(1+r) + 1] $$. We use the fomula for the sum of geometric series $$ S_n = \frac{1-a^{n+1}}{(1-a)} $$. So the final formula becomes $$ (r+1)^{n}p + m\frac{ 1-(r+1)^{n} }{ r } $$.</p>
<p>We can use <strong>math induction</strong> to prove it.</p>
<p><strong>the case of $n$th term</strong></p>
<p>debt left $ (r+1)^{n}p + m\frac{ 1-(r+1)^{n} }{ r } $.</p>
<p><strong>the case of $(n+1)$th term</strong></p>
<p>starting debt = last debt $$ (r+1)^{n}p + m\frac{ 1-(r+1)^{n} }{ r } $$
current interest = starting debt * monthly interest rate $$ r(r+1)^{n}p + rm\frac{ 1-(r+1)^{n} }{ r } $$
actual principal payment = ( monthly payment - current interest ) $$ m - [ r(r+1)^{n}p + rm\frac{ 1-(r+1)^{n} }{ r } ] $$</p>
<p>debt left = ( starting debt - actual principal payment )
$$
\begin{aligned}
&amp; (r+1)^{n}p + m\frac{ 1-(r+1)^{n} }{ r } -  \left [ m - [ r(r+1)^{n}p + rm\frac{ 1-(r+1)^{n} }{ r } ] \right ]  \<br>
= &amp; (r+1)^{n+1}p + m\frac{ 1-(r+1)^{n} }{ r } - m + rm\frac{ 1-(r+1)^{n} }{ r } ]\<br>
= &amp; (r+1)^{n+1}p + m [ \frac{ 1-(r+1)^{n} }{ r } - \frac{r}{r} + \frac{ r-r(r+1)^{n} }{ r } ] \<br>
= &amp; (r+1)^{n+1}p + m [ \frac{ 1-(r+1)(r+1)^{n} }{ r } ] \<br>
= &amp; (r+1)^{n+1}p + m [ \frac{ 1-(r+1)^{n+1} }{ r } ]
\end{aligned}
$$</p>
<p>Cosistent with the formula for $n$th term. So it proves.</p>
<p>To calculate the monthly payment, we let the final debt of the $n$th term be zero.
$$ (r+1)^np + m\frac{ 1-(r+1)^n }{ r } = 0 $$
So we have the formula for monthly payment $$ m = \frac{ (r+1)^np }{ \frac{ (r+1)^n - 1 }{ r }  } = p r \frac{ (r+1)^n }{ (r+1)^n - 1  } =  \frac{ p r }{ 1 - (r+1)^{-n} }$$</p>
<h3 id="what-is-the-total-interest">What is the Total Interest?</h3>
<p>Total Interest = number of months * number of terms - principal
$$
\begin{aligned}
m*n - p &amp; = \frac{ p r }{ 1 - (r+1)^{-n} }*n - p \<br>
&amp; = [ \frac{ n r }{ 1 - (r+1)^{-n} } - 1 ]p
\end{aligned}
$$</p>
<h3 id="an-example">An Example</h3>
<p>Suppose we are getting the mortgage loan 350K with interest rate 3%. Then $p=350000$ and fixed anualized interest rate $a=0.03$ for 30 years. Plug them in the formula. The monthly interest rate $r=a/12=0.03/12=0.0025$. Number of terms $ n = 30\times 12=360 $.</p>
<p>Monthly payment $$ \frac{ p r }{ 1 - (r+1)^{-n} } = \frac{ 350000\times 0.03 }{ 1 - (0.0025+1)^{-360} } = 1475 $$</p>
<p>Total interest $$ m<em>n-p = 1475</em>360-350000 = 181221 $$</p>
<p>So with annualized interest rate 3%, you have to pay more than half of the principal as interest. The fraction of total interest over principal is $$ \frac{ n r }{ 1 - (r+1)^{-n} } - 1 $$. The following table shows the change of total interest fraction on various interest rates ($n=30\times 12=360$).</p>
<table>
<thead>
<tr>
<th>Interest Rate</th>
<th align="center">Total Interest</th>
</tr>
</thead>
<tbody>
<tr>
<td>0.01</td>
<td align="center">0.158</td>
</tr>
<tr>
<td>0.014</td>
<td align="center">0.225</td>
</tr>
<tr>
<td>0.018</td>
<td align="center">0.295</td>
</tr>
<tr>
<td>0.022</td>
<td align="center">0.367</td>
</tr>
<tr>
<td>0.026</td>
<td align="center">0.441</td>
</tr>
<tr>
<td>0.03</td>
<td align="center">0.518</td>
</tr>
<tr>
<td>0.034</td>
<td align="center">0.597</td>
</tr>
<tr>
<td>0.038</td>
<td align="center">0.677</td>
</tr>
<tr>
<td>0.042</td>
<td align="center">0.76</td>
</tr>
<tr>
<td>0.046</td>
<td align="center">0.846</td>
</tr>
<tr>
<td>0.05</td>
<td align="center">0.933</td>
</tr>
</tbody>
</table>
<p>With 5% annualized interest rate, the total interest is almost the same as the principal.</p>

</main>

  <footer>
  <script async src="//yihui.name/js/center-img.js"></script>

  
  <hr/>
  Â© Xin Xie 2021 | <a href="https://www.linkedin.com/in/xin-xie-ph-d-1274595a/">LinkedIn</a>
  
  </footer>
  </body>
</html>

